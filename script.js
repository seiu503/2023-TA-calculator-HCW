const lookup = [
  {
    "userHours": 1,
    "eocHourly": 20,
    "locTotal": 1996,
    "increaseOverCurrent": 148,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 2,
    "eocHourly": 20,
    "locTotal": 3992,
    "increaseOverCurrent": 296,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 3,
    "eocHourly": 20,
    "locTotal": 5988,
    "increaseOverCurrent": 444,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 4,
    "eocHourly": 20,
    "locTotal": 7984,
    "increaseOverCurrent": 592,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 5,
    "eocHourly": 20,
    "locTotal": 9980,
    "increaseOverCurrent": 740,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 6,
    "eocHourly": 20,
    "locTotal": 11976,
    "increaseOverCurrent": 888,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 7,
    "eocHourly": 20,
    "locTotal": 13972,
    "increaseOverCurrent": 1035,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 8,
    "eocHourly": 20,
    "locTotal": 15968,
    "increaseOverCurrent": 1183,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 9,
    "eocHourly": 20,
    "locTotal": 17964,
    "increaseOverCurrent": 1331,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 10,
    "eocHourly": 20,
    "locTotal": 19960,
    "increaseOverCurrent": 1479,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 11,
    "eocHourly": 20,
    "locTotal": 21956,
    "increaseOverCurrent": 1627,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 12,
    "eocHourly": 20,
    "locTotal": 23952,
    "increaseOverCurrent": 1775,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 13,
    "eocHourly": 20,
    "locTotal": 25948,
    "increaseOverCurrent": 1923,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 14,
    "eocHourly": 20,
    "locTotal": 27944,
    "increaseOverCurrent": 2071,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 15,
    "eocHourly": 20,
    "locTotal": 29940,
    "increaseOverCurrent": 2219,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 16,
    "eocHourly": 20,
    "locTotal": 31936,
    "increaseOverCurrent": 2367,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 17,
    "eocHourly": 20,
    "locTotal": 33932,
    "increaseOverCurrent": 2515,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 18,
    "eocHourly": 20,
    "locTotal": 35928,
    "increaseOverCurrent": 2663,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 19,
    "eocHourly": 20,
    "locTotal": 37924,
    "increaseOverCurrent": 2810,
    "numCOLAs": 2,
    "numSteps": 0
  },
  {
    "userHours": 20,
    "eocHourly": 21,
    "locTotal": 40960,
    "increaseOverCurrent": 3998,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 21,
    "eocHourly": 21,
    "locTotal": 43008,
    "increaseOverCurrent": 4198,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 22,
    "eocHourly": 21,
    "locTotal": 45056,
    "increaseOverCurrent": 4398,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 23,
    "eocHourly": 21,
    "locTotal": 47104,
    "increaseOverCurrent": 4598,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 24,
    "eocHourly": 21,
    "locTotal": 49152,
    "increaseOverCurrent": 4798,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 25,
    "eocHourly": 21,
    "locTotal": 51201,
    "increaseOverCurrent": 4999,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 26,
    "eocHourly": 21,
    "locTotal": 53249,
    "increaseOverCurrent": 5199,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 27,
    "eocHourly": 21,
    "locTotal": 55297,
    "increaseOverCurrent": 5399,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 28,
    "eocHourly": 21,
    "locTotal": 57345,
    "increaseOverCurrent": 5599,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 29,
    "eocHourly": 21,
    "locTotal": 59393,
    "increaseOverCurrent": 5799,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 30,
    "eocHourly": 21,
    "locTotal": 61441,
    "increaseOverCurrent": 5999,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 31,
    "eocHourly": 21,
    "locTotal": 63489,
    "increaseOverCurrent": 6199,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 32,
    "eocHourly": 21,
    "locTotal": 65537,
    "increaseOverCurrent": 6398,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 33,
    "eocHourly": 21,
    "locTotal": 67585,
    "increaseOverCurrent": 6598,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 34,
    "eocHourly": 21,
    "locTotal": 69633,
    "increaseOverCurrent": 6798,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 35,
    "eocHourly": 21,
    "locTotal": 71681,
    "increaseOverCurrent": 6998,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 36,
    "eocHourly": 21,
    "locTotal": 73729,
    "increaseOverCurrent": 7198,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 37,
    "eocHourly": 21,
    "locTotal": 75777,
    "increaseOverCurrent": 7398,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 38,
    "eocHourly": 21,
    "locTotal": 77825,
    "increaseOverCurrent": 7598,
    "numCOLAs": 2,
    "numSteps": 1
  },
  {
    "userHours": 39,
    "eocHourly": 22,
    "locTotal": 81901,
    "increaseOverCurrent": 9826,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 40,
    "eocHourly": 22,
    "locTotal": 84001,
    "increaseOverCurrent": 10078,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 41,
    "eocHourly": 22,
    "locTotal": 87151,
    "increaseOverCurrent": 11380,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 42,
    "eocHourly": 22,
    "locTotal": 90301,
    "increaseOverCurrent": 12682,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 43,
    "eocHourly": 22,
    "locTotal": 93451,
    "increaseOverCurrent": 13984,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 44,
    "eocHourly": 22,
    "locTotal": 96601,
    "increaseOverCurrent": 15285,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 45,
    "eocHourly": 22,
    "locTotal": 99751,
    "increaseOverCurrent": 16587,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 46,
    "eocHourly": 22,
    "locTotal": 102901,
    "increaseOverCurrent": 17889,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 47,
    "eocHourly": 22,
    "locTotal": 106051,
    "increaseOverCurrent": 19191,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 48,
    "eocHourly": 22,
    "locTotal": 109201,
    "increaseOverCurrent": 20493,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 49,
    "eocHourly": 22,
    "locTotal": 112351,
    "increaseOverCurrent": 21795,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 50,
    "eocHourly": 22,
    "locTotal": 115501,
    "increaseOverCurrent": 23097,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 51,
    "eocHourly": 22,
    "locTotal": 118651,
    "increaseOverCurrent": 24399,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 52,
    "eocHourly": 22,
    "locTotal": 121801,
    "increaseOverCurrent": 25701,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 53,
    "eocHourly": 22,
    "locTotal": 124951,
    "increaseOverCurrent": 27003,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 54,
    "eocHourly": 22,
    "locTotal": 128101,
    "increaseOverCurrent": 28305,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 55,
    "eocHourly": 22,
    "locTotal": 131251,
    "increaseOverCurrent": 29607,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 56,
    "eocHourly": 22,
    "locTotal": 134401,
    "increaseOverCurrent": 30909,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 57,
    "eocHourly": 22,
    "locTotal": 137551,
    "increaseOverCurrent": 32210,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 58,
    "eocHourly": 22,
    "locTotal": 140701,
    "increaseOverCurrent": 33512,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 59,
    "eocHourly": 22,
    "locTotal": 143851,
    "increaseOverCurrent": 34814,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 60,
    "eocHourly": 22,
    "locTotal": 147001,
    "increaseOverCurrent": 36116,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 61,
    "eocHourly": 22,
    "locTotal": 150151,
    "increaseOverCurrent": 37418,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 62,
    "eocHourly": 22,
    "locTotal": 153301,
    "increaseOverCurrent": 38720,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 63,
    "eocHourly": 22,
    "locTotal": 156451,
    "increaseOverCurrent": 40022,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 64,
    "eocHourly": 22,
    "locTotal": 159602,
    "increaseOverCurrent": 41325,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 65,
    "eocHourly": 22,
    "locTotal": 162752,
    "increaseOverCurrent": 42627,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 66,
    "eocHourly": 22,
    "locTotal": 165902,
    "increaseOverCurrent": 43929,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 67,
    "eocHourly": 22,
    "locTotal": 169052,
    "increaseOverCurrent": 45231,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 68,
    "eocHourly": 22,
    "locTotal": 172202,
    "increaseOverCurrent": 46533,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 69,
    "eocHourly": 22,
    "locTotal": 175352,
    "increaseOverCurrent": 47834,
    "numCOLAs": 2,
    "numSteps": 2
  },
  {
    "userHours": 70,
    "eocHourly": 22,
    "locTotal": 178502,
    "increaseOverCurrent": 49136,
    "numCOLAs": 2,
    "numSteps": 2
  }
];

// set global variables
let userHours = 0;
let numberOfCOLAs = 0;
let numberOfSteps = 0;
let endHourlyRate = 0;
let payIncreaseDollar = 0;
let payIncreasePercent = 0;
let lifeOfContractTotal = 0;
let userLang = "en-US";
let userLangCode = "en";
let userObj = {};

// translation object
const trans = {
  p1_1: {
    en: "You will be eligible for ",
    es: "Usted será elegible para ",
    ru: "Вы будете иметь право на ",
    vi: "Bạn sẽ đủ điều kiện nhận ",
    zh: "合同结束时，您将有资格获得 "
  },
  p1_2: {
    en: " COLAs (Cost of Living Adjustments) and up to ",
    es: " ajustes por costo de vida (COLA, siglas en inglés) a su salario y hasta ",
    ru: " COLA (корректировки стоимости жизни) и до ",
    vi: " COLA (Điều chỉnh chi phí sinh hoạt) và tăng lên tới ", 
    zh: " COLA（生活费用调整）和直到 "
  },
  p1_3: {
    en: " step increases by the end of the contract.",
    es: " aumentos por escalafón al vencimiento del contrato colectivo.",
    ru: " поступенчатых повышений зарплаты к концу действия контракта. ",
    vi: " bậc khi kết thúc hợp đồng.", 
    zh: " 步加薪。"
  },
  p2_1: {
    en: "Your hourly rate by the end of the 2023-2025 contract will be ",
    es: "Su pago por hora al final del contrato 2023-2025 será ",
    ru: "Ваша почасовая ставка к концу контракта на 2023-2025 годы составит ",
    vi: "Mức lương theo giờ của bạn vào cuối hợp đồng 2023-2025 sẽ là ", 
    zh: "到 2023-2025 年合同结束时，您的时薪将为 "
  },
  p3_1: {
    en: "This pay increase is ",
    es: "Este aumento salarial es ",
    ru: "Это увеличение заработной платы на ",
    vi: "Mức tăng lương này là ",
    zh: "此次加薪比当前 17.77 美元的基本工资高 "
  },
  p3_2: {
    en: " more per hour than the current base rate of $17.77. This is a ",
    es: " más por hora que la tarifa base actual de $17.77. Este es un aumento del ",
    ru: " больше в час, чем текущая базовая ставка в размере 17,77 долл. Это ",
    vi: " nhiều hơn mỗi giờ so với mức lương cơ bản hiện tại là 17,77 USD. Đây là mức tăng ",
    zh: " 倍。到合同结束时，每小时增加 "
  },
  p3_3: {
    en: " percent increase per hour by the end of the contract.",
    es: " por ciento por hora al vencimiento del contrato colectivo.",
    ru: "-процентное увеличение в час к концу действия контракта.",
    vi: " phần trăm mỗi giờ vào cuối hợp đồng.",
    zh: "%。"
  },
  p4_1: {
    en: "Your increase in earnings over the life of the contract is estimated to be ",
    es: "Su aumento estimado en los ingresos durante el plazo del acuerdo de negociación colectiva: ",
    ru: "Ваше увеличение заработка в течение срока действия контракта оценивается в ",
    vi: "Mức tăng thu nhập của bạn trong suốt thời hạn hợp đồng được ước tính là ",
    zh: "在合同期内，您的收入预计将增加 "
  },
  val1: {
    en: "Please select the average number of hours you work per week",
    es: "Por favor seleccione el número promedio de horas que trabaja por semana",
    ru: "Пожалуйста, выберите среднее количество часов, которые вы работаете в неделю", 
    vi: "Vui lòng chọn số giờ trung bình bạn làm việc mỗi tuần",
    zh: "请选择您每周的平均工作时间"
  }
}

document.addEventListener("DOMContentLoaded", function(){
  console.log('dom loaded');

  // save elements to variables for later access
  let displayEl = document.getElementById("display");
  let dispwrap = document.getElementById("dispwrap");
  let submit = document.getElementById("submitButton");
  let startOver = document.getElementById("startOverButton");
  let results = document.getElementById("results");
  let message = document.getElementById('message');
  let hpwEl = document.getElementById("hPW");
  let hpwCustom = document.getElementById("hPWCustom");
  let instructions = document.getElementById("instructions");
  let inputs = document.getElementById("inputs");
  let languagePicker = document.getElementsByClassName('gt_selector')[0];

  // set language code
  const setLanguageCode = () => {
    if (languagePicker) {
      console.log(`languagePicker: ${languagePicker.value}`);
      userLang = languagePicker.value;
      userLangCode = userLang.substring(3).toLowerCase();
      console.log(`userLang LP: ${userLang}`);
      console.log(`userLangCode LP: ${userLangCode}`);
    } else {
      userLang = navigator.language || navigator.userLanguage; 
      userLangCode = userLang.substring(0,2).toLowerCase();
      console.log(`userLang NOLP: ${userLang}`);
      console.log(`userLangCode NOLP: ${userLangCode}`);
    }

    const langCodeOptions = ['en', 'es', 'ru', 'vi', 'zh'];

    // default to english if user language is not supported
    if (!langCodeOptions.includes(userLangCode)) {
      console.log('userLangCode not in array');
      userLangCode = "en";
      console.log(`userLangCode: ${userLangCode}`);
    };
  }
  setLanguageCode();
  

  // generate list of hours options
  let hoursOptions = Array.from(Array(61).keys());
  hoursOptions.shift();
  console.log(hoursOptions);

  // load list of hoursOptions
  hpwEl.options.length = 1;
  hoursOptions.forEach(item => {
    hpwEl.options[hpwEl.options.length] = new Option(item, item)
  });  

  // find userObj
  const findUserObj = () => {
    console.log('findUserObj');
    console.log(`userHours: ${userHours}`);
    userObj = lookup.find((item) => item['userHours'].toString() === userHours );
    if (!userObj) { userObj = {} };
    console.log('userObj');
    console.log(userObj);
  };

  // listen for changes to hours worked
  function hoursChange(e) {
    console.log('hoursChange');
    userHours = e.target.value;
    console.log(`userHours: ${userHours}`);
    findUserObj();
  }

  // clean currency strings
  const clean = (str) => {
    if (typeof(str) == "number") {
      return str;
    } else {
      return parseFloat(str.replace(/[^0-9]/g, ""));
    }
  };




  // generate results string and message
  function resultsString() {
    // set variables
    let numCOLAs = userObj['numCOLAs'] || 0;
    let numSteps = userObj['numSteps'] || 0;
    let eocHourly = userObj['eocHourly'] || 0;
    let payIncreaseDollar = eocHourly - 17.77 || 0;
    let payIncreasePercent = (payIncreaseDollar / 17.77 * 100).toFixed(0) || 0;
    let locTotal = userObj['locTotal'] || 0;
    let increaseOverLOC = locTotal - (17.77 * userHours * 104) || 0;

    console.log(`numCOLAs: ${numCOLAs}`);
    console.log(`numSteps: ${numSteps}`);
    console.log(`eocHourly: ${eocHourly}`);
    console.log(`payIncreaseDollar: ${payIncreaseDollar}`);
    console.log(`payIncreasePercent: ${payIncreasePercent}`);
    console.log(`locTotal: ${locTotal}`);
    console.log(`increaseOverLOC: ${increaseOverLOC}`);

    if (!userObj['numCOLAs']) {
      return `<p>No data available yet for that number of hours per week</p>`
    }

    return `<p style="max-width: 600px; margin: auto auto 20px auto;"><ul style="max-width: 600px; margin: auto;"><li style="margin-bottom:15px;">${trans['p1_1'][userLangCode]}<span class="purplebold">${numCOLAs}</span>${trans['p1_2'][userLangCode]}<span class="purplebold">${numCOLAs}</span>${trans['p1_3'][userLangCode]}</li>
    <li style="margin-bottom:15px;">${trans['p2_1'][userLangCode]}<span class="purplebold">$${eocHourly}</span>.</li>
    <li style="margin-bottom:15px;">${trans['p3_1'][userLangCode]}<span class="purplebold">$${payIncreaseDollar.toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>${trans['p3_2'][userLangCode]}<span class="purplebold">${payIncreasePercent}</span>${trans['p3_3'][userLangCode]}</li>
    <li style="margin-bottom:15px;">${trans['p4_1'][userLangCode]}<span class="purplebold">$${increaseOverLOC.toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>.</li></ul>
    </p>`
  }

  // On reload, reload page
  function handleReload() {
    window.location.reload();
  }

  // On submit, hide instructions and display results
  function handleSubmit(e) {
    e.preventDefault();
    if (!userHours || userHours == 0) {
      console.log('!userHours');
      submit.setAttribute("style", "display:none;");
      startOver.setAttribute("style", "display:block;");
      instructions.setAttribute("style", "height: 0; display:none;");
      inputs.setAttribute("style", "height: 0; display:none;");
      message.setAttribute("style", "display:block;");
      results.innerHTML = `<h3 class=center>${trans['val1'][userLangCode]}</h3>`;
      return;
    }
    submit.setAttribute("style", "display:none;");
    startOver.setAttribute("style", "display:block;");
    instructions.setAttribute("style", "height: 0; display:none;");
    inputs.setAttribute("style", "height: 0; display:none;");
    message.setAttribute("style", "display:block;");
    results.innerHTML = resultsString();
  }

  submit.addEventListener("click", handleSubmit);
  startOver.addEventListener("click", handleReload);
  if(languagePicker) {
    languagePicker.addEventListener("change", setLanguageCode);
  }
  

  // custom select styling

  let x, i, j, l, ll, selElmnt, a, b, c;
  /* Look for any elements with the class "custom-select": */
  x = document.getElementsByClassName("custom-select");
  l = x.length;

  function replaceSelect(selElmnt, customElmt, replace) {
    ll = selElmnt.length;

    if (replace) {
      /* For each element, create a new DIV that will act as the selected item: */
      a = document.createElement("DIV");
      a.setAttribute("class", `select-selected ${selElmnt.getAttribute('id')}`);
    } else {
      a = document.getElementsByClassName(`select-selected ${selElmnt.getAttribute('id')}`)[0];
    }
    a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
    customElmt.appendChild(a);
    /* For each element, create a new DIV that will contain the option list: */
    b = document.createElement("DIV");
    b.setAttribute("class", "select-items select-hide");
    
    for (j = 1; j < ll; j++) {

      /* For each option in the original select element,
      create a new DIV that will act as an option item: */
      c = document.createElement("DIV");
      c.innerHTML = selElmnt.options[j].innerHTML;
      c.addEventListener("click", function(e) {
          /* When an item is clicked, update the original select box,
          and the selected item: */
          let y, i, k, s, h, sl, yl;
          s = this.parentNode.parentNode.getElementsByTagName("select")[0];
          sl = s.length;
          h = this.parentNode.previousSibling;
          for (i = 0; i < sl; i++) {
            if (s.options[i].innerHTML == this.innerHTML) {
              s.selectedIndex = i;
              h.innerHTML = this.innerHTML;
              y = this.parentNode.getElementsByClassName("same-as-selected");
              yl = y.length;
              for (k = 0; k < yl; k++) {
                y[k].removeAttribute("class");
              }
              this.setAttribute("class", "same-as-selected");
              break;
            }
          }
          if (s.getAttribute('id') === 'hPW') {
            hoursChange({ target: s });
          };
          h.click();
      });
      b.appendChild(c);
    }
    customElmt.appendChild(b);
    a.addEventListener("click", function(e) {
      /* When the select box is clicked, close any other select boxes,
      and open/close the current select box: */
      e.stopPropagation();
      closeAllSelect(this);
      this.nextSibling.classList.toggle("select-hide");
      this.classList.toggle("select-arrow-active");
    });
  }
  for (i = 0; i < l; i++) {
    let customElmt = x[i];
    selElmnt = customElmt.getElementsByTagName("select")[0];
    replaceSelect(selElmnt, customElmt, true);
  }

  function closeAllSelect(elmnt) {
    /* A function that will close all select boxes in the document,
    except the current select box: */
    let x, y, i, xl, yl, arrNo = [];
    x = document.getElementsByClassName("select-items");
    y = document.getElementsByClassName("select-selected");
    xl = x.length;
    yl = y.length;
    for (i = 0; i < yl; i++) {
      if (elmnt == y[i]) {
        arrNo.push(i)
      } else {
        y[i].classList.remove("select-arrow-active");
      }
    }
    for (i = 0; i < xl; i++) {
      if (arrNo.indexOf(i)) {
        x[i].classList.add("select-hide");
      }
    }
  }

  /* If the user clicks anywhere outside the select box,
  then close all select boxes: */
  document.addEventListener("click", closeAllSelect); 

});
